import requests
import uuid
import json

url = "http://localhost:5002"

# res = requests.get(url=url + "/api/list_wallet")
# print(res.json())

# res = requests.post(url=url + "/api/open_wallet", json={"wallet_name": "steward2", "passwd": "steward2"})
# print(res.json())

# res = requests.get(url=url + "/api/list_did")
# print(res.json())

res = requests.post(url=url + "/api/create_wallet", json={
    "wallet_name": "AllyBank",
    "wallet_key": "AllyBank",
})
print(res.json())


# res = requests.post(url=url + "/api/open_wallet", json={
#     "wallet_name": "NJU",
#     "wallet_key": "NJU",
# })
# print(res.json())

# res = requests.post(url=url + "/api/create_did", json={
#     "seed": "000000000000000000000000Steward1",
# })
# print(res.json())

# res = requests.post(url=url + "/api/create_did", json={
#     "seed": "000000000000000000000000000User1",
# })
# print(res.json())

res = requests.get(url=url + "/api/list_did", json={
    
})
print(res.json())

# res = requests.post(url=url + "/api/create_user", json={
#     "mydid": "CHdq3VsmYm4iLsfhLturw4",
#     "newdid": "4qk3Ab43ufPQVif4GAzLUW",
#     "newverkey": "36QKEqKjfNYL4A8SCURmKhsovScf2iuM5ziLDDtCypS9",
#     "role": None,
# })
# print(res.json())

# res= requests.post(url=url + "/api/create_schema", json={
#     "mydid": "CHdq3VsmYm4iLsfhLturw4",
#     "schema_name": "transcript",
#     "version": "1.5",
#     "attributes": ['first_name', 'last_name', 'degree', 'status', 'year', 'average', 'ssn'],
# })
# print(res.json())

# res= requests.post(url=url + "/api/create_cred_def", json={
#     "mydid": "CHdq3VsmYm4iLsfhLturw4",
#     "schema": {"ver": "1.0", "id": "CHdq3VsmYm4iLsfhLturw4:2:transcript:1.5", "name": "transcript", "version": "1.5", "attrNames": ["degree", "last_name", "first_name", "average", "status", "year", "ssn"], "seqNo": 25},
#     "tag": "TAG3",
#     "signature_type": "CL",
# })
# print(res.json())

# res= requests.post(url=url + "/api/create_credential_offer", json={
#     "mydid": "CHdq3VsmYm4iLsfhLturw4",
#     "cred_def_id": "CHdq3VsmYm4iLsfhLturw4:3:CL:25:TAG3",
# })
# print(res.json())

# ["degree", "last_name", "first_name", "average", "status", "year", "ssn"]

# cred_request_str = '{"prover_did":"4qk3Ab43ufPQVif4GAzLUW","cred_def_id":"CHdq3VsmYm4iLsfhLturw4:3:CL:25:TAG3","blinded_ms":{"u":"23442730191477014040062177927189750596147799151024320433504838161865814962298380114547379461240228445647628677760601163503282463155747048829969665910881293398032702298734267439914141066138983085043255868610459005895450105278185896140335303230818358978991571320362337112273061406176542629159200170472121713327655580170652263752956214254569211239262367565535301415834666114674679222638448346325129692092533619491113927931189473754689271341538138305444994678779700277597885490415733693779784519445460184711940174028539555922548248762832769537917394221587511623625129567006483441661195603909740403354282614785655276697953","ur":null,"hidden_attributes":["master_secret"],"committed_attributes":{}},"blinded_ms_correctness_proof":{"c":"53259393889353168627975935988303147018017258554335692606413103430510810790116","v_dash_cap":"449631829623310543010398817533138918570259308179124300812067507875058309505465274395280757808356909179663614010737808672613965748029568947349195435001322700892571283033461491252502899007655481592961677890623131564704989930112265928550459961023615452972637752721907935643232248837751981306036777512788559162012047860657681274995701716953456128936433889414017684595100903597062256332624539422692448606534028661901942917486772681765756221933556762436377258386720325799010221685465874373461604019279738059645099318284482679501705801002015170592230180258061929011618530102938466924407946497100146253539875410954265057745254879716302536510512064752349417613543097823494358957327689328136313877038497104867867911790150382711","m_caps":{"master_secret":"23160664906662445167615840679794258173978110861621716656299304603080026387629896755904163218258532624249760603323956784754192819599562579407256471929311994414351389803375092431123"},"r_caps":{}},"nonce":"364039389686323193190070"}'

# cred_request = json.loads(
#     '{"prover_did":"4qk3Ab43ufPQVif4GAzLUW","cred_def_id":"CHdq3VsmYm4iLsfhLturw4:3:CL:25:TAG3","blinded_ms":{"u":"61787467940213431004724071365470660786304477459590981242340720995903464679553207914762077272624771931144483153143056318019485243168739836049047076950169932036667918251367047227489552990135270265490252526666559187596804868351497554253064954732680729577157621272863635307931483408061760501140316148528688678144970223918914149892746070896191045991331572619139474183641097433917911959123188295832714601337081712260753103990920351600623260215903091664818483196179840316494451565523738346275247617464992787568388236960895696938947228378029676121173085583413519302144542939678884838590832491483071786768706376084437642770845","ur":null,"hidden_attributes":["master_secret"],"committed_attributes":{}},"blinded_ms_correctness_proof":{"c":"20856988151097663720692559651722045945794711551744636464223707311149877943640","v_dash_cap":"394027374363741288469422364391814918320494845595248766897492124279255434637911298554163687463576681989776114497919763945296185810853630949923375018130283528696061074350151543896409569647845963246039562874687162282644510190788945089307868298474102009081277321771901916802776526001941923669791646150877231264812287982663560927285327358976860333427352499566390572591886066611922101850146584539168342680624616135592433392331674729211339384546346690472817524253365396544758842977656805760918069130005670570902980212980790260834129463361455503352515732816489947235956718674511993208860180950784719985211308484806938604434420155213716179097350693007465425293933769054975364578237832657949071934088038758908303130058513778274","m_caps":{"master_secret":"26600523656759466794383912573475782369458523887655253824670818786323374846605470686341991738967132083567327649177373238397840749730407630201510884050338809099014068063266589046502"},"r_caps":{}},"nonce":"501965487107971554683944"}'

# )

# print("cred_request:", cred_request)

# res = requests.post(url=url + "/api/create_credential", json={
#     "cred_offer":{"schema_id":"CHdq3VsmYm4iLsfhLturw4:2:transcript:1.5","cred_def_id":"CHdq3VsmYm4iLsfhLturw4:3:CL:25:TAG3","key_correctness_proof":{"c":"85858170543143190629233606303808309473089400548938303546707100870461009814207","xz_cap":"1345639095135930218711767940872938029047462993728059245633959210475590611398766763158068992534652023829051783412819299380499055162733136550795494769704400880554668291967301920305893433815627374664901904490721443168769573373945714351707832268406727330053677932069142638197413950148596858772540858690015166299274339487439857661868495644685716822250344643029663023367906827349209940011743893495975921278830628495681248473036034502086193750284779372712701745768413221570133761889821022435386020440554406832911397664114986278270110977377380852623361137688427906640074811020340289828023230458615135206091016869639076480133260615519241202397187997998409420772775165987377828495440008942478511658786450","xr_cap":[["master_secret","334709385235453724516567786263597518368372436766992952593489256686163890950497235530353019994082752766704652889492842326528377160442396948626881930588773352052906669181363927001793754165728524716917471638303465308415687104322258194469437910963302907857922545291820178587518695001952111006098590571368012730179327856952886768974762219673649836879436313936449690826142257886171727400616569360250841559617627534446910201243007114655327548730543290682374104706329003224960525278852018933958057685779178474674100702635967890253403376731697667088164043972553138233245814931528506147066837456914837464491062281762834090273153681895697276407733310507628857746583973697350783226960938943683976033622372"],["last_name","1349928781467643564747191463015955231802205534934242330156004063067989125489815869548561751981975079284935038158116912557996813090219048757981753856728341991326499420126965204119137195087155679051868479963853447971917369367554799406230568859942624576875060367896504793067151639302862685294317058446470161178814320903173275292812647360697611539242022713023631643261330412647744845151509467941433595890675730578087034038510016457168415905748341096554236954389623542466179175156716608627380387546544598779608984335391829312622444414171967962868729229416146664637047660228628120865357455606871482651813607449318142555706555669081289721141724424588336115193112653938802956808752908336401860699700833"],["average","2068666538027099125542475728766963569212614482257968335999581325401327720551541070033317981107926635574141168295840749233832579653876268106349239667196524724341430315194447457071785315506602958270889352604785216736060710528458649229581682558376311351881074825145805725032336412759663520223627829235196082143823705493946574404579233449037081286219436846118797533123292541939010446150819309061941211064064193682238117709875701988013675613417605161113157062229220952307709585118118087668691005267490114358647145564480097017221516921955411000142477763490751959706106872863197879345880362898089585073742072818749802343904419631144633310049799649621902821874776958229908877409073468816056145209198960"],["year","879486401759725360403332922550398875322477458944754877694603810380301398441837707697631172714725510059763477005433677377921418677459700577086082230768529391912901329264601777978761298458203233099259623363865535815696837185451505161920065360922479530233404568319886036286680906010646041156241407152672994935917631677577164655022893437986419836794162870960337227005165577694181395711346202697285564688085996399406405542170188996195957651111231048019152552723581824513399080612458514678313060279774882324676821038835842230589651066118909755956540323159307108982413084915723973376036364310557926678620673992578202991806837372801205405410111864056397246573372002437182353965815345948417893149672459"],["degree","2091272088671279112283254599654150176436637796163214361914266659871203800312600919954263059604206828758941788452865177646006220697093181830086188393702595203595842301755032662714042760347310135066113977500931244236294144207020083449777351165242468015527818700438629509251708111514301252129205788908986750346127074230339988225132285996687784404442736277380807385774819859151534676207140268674589799015642470785526291465918480516471746942229284364130426011489024909920704947563442386797123665316896099901407723264466598055277293768482888801868835902274081095131819341508423355963449303614709223162262484550112668955425516190533748683737757398000898478540491345469146665427323602189595738031747039"],["ssn","897415843981965304844021952457611115365492103897286634257483747588122093056782658691804012667733705960394048146428522228447318419484638376220678137706816519423802968064338413192465763501838504637611795142080050794711668794976621036352923377813983419578733090131163307528722235694849493954350341976942547944400036440130995830889739863474682308121658131141997128745557534290083472179522544296526281553240986863029386445545875936037392749984858890279354440912301260135955541080530735531675505206219391079223885507268680854632225239737172335433157078289446815582062866771641070926117697468767846840047777557603021734640349299853349309673217577545495689574820544384973967701313787641416035930471122"],["status","793549733750610233097965590241018192743639195234473517849823560903927669265570460570510988027863527284874241779767332856098221268101669961266911556126989579478533293808458449552366023303724200204912549839475101103272774695214590974322315185151596303980677200457616379787801501798847525018014123885239097818271913253286708740256135738928079309371204051022652267922544083283639361982216905627947167012789952177882277454101890973752896872929406419150771280386612784981487112348799030405333721922092723655859739856948670466467836256886644648877199429681838269253095312152554514047027568435083251663304560697579142235774733325460267289561994596683374479102647394191488833499275987362366234679425858"],["first_name","604621289906735754025530394080449737151402481350711857359498663871185372684526609548104205882355916370363641385144128355018888584315409439759168753534360341578498955657698969672182847368200953697245709063995655421009084489055753909209763369287288521503519590948229390475359597970903889631040860186576778659756391623806229828763545148942857824180042235071697767307988552883893077682110314460587276621791504218647652372561954651844739727073730860264711082782373647273172570279119417700699087448859377227787487185365749475019623294250874680583696614686123195868879328011549256690133504853608567500724323394678083445843859729223540162113150669766800829321409952633266397234765917970613415956933816"]]},"nonce":"611106639393295916142274"},
#     "cred_request":cred_request,
#     "cred_values":{
#       "name": {"raw": "GodricLee", "encoded": "1139481716457488690172217916278103335"},
#       "age": {"raw": "20", "encoded": "20"},
#       "balance": {"raw": "200000", "encoded": "200000"},
#       "credit": {"raw": "High", "encoded": "235325346346456346435345"},
#   }
# })
# print(res.json())

proof_req={
      'nonce': '1432422343242122312411212',
      'name': 'Job-Application',
      'version': '0.1',
      'requested_attributes': {
          'attr1_referent': {
              'name': 'first_name'
          },
          'attr2_referent': {
              'name': 'last_name'
          },
          'attr3_referent': {
              'name': 'degree',
              'restrictions': {"issuer_did": "CHdq3VsmYm4iLsfhLturw4"}
          },
          'attr4_referent': {
              'name': 'status',
              'restrictions': {"issuer_did": "CHdq3VsmYm4iLsfhLturw4"}
          },
          'attr5_referent': {
              'name': 'ssn',
              'restrictions': {"issuer_did": "CHdq3VsmYm4iLsfhLturw4"}
          },
          'attr6_referent': {
              'name': 'phone_number'
          }
      },
      'requested_predicates': {
          'predicate1_referent': {
              'name': 'average',
              'p_type': '>=',
              'p_value': 4,
              'restrictions': {"issuer_did": "CHdq3VsmYm4iLsfhLturw4"}
          }
      }
  }

with open("../saves/user/StudentA/proof.json", "r") as f:
    proof = json.load(f)

# res = requests.post(url=url + "/api/verify_proof", json={

#     'proof_req':proof_req,
#     'proof': proof,
#     "schema":   {"CHdq3VsmYm4iLsfhLturw4:2:transcript:1.5":{"ver": "1.0", "id": "CHdq3VsmYm4iLsfhLturw4:2:transcript:1.5", "name": "transcript", "version": "1.5", "attrNames": ["degree", "last_name", "first_name", "average", "status", "year", "ssn"], "seqNo": 25}},
#     "cred_def":{"CHdq3VsmYm4iLsfhLturw4:3:CL:25:TAG3":{"ver":"1.0","id":"CHdq3VsmYm4iLsfhLturw4:3:CL:25:TAG3","schemaId":"25","type":"CL","tag":"TAG3","value":{"primary":{"n":"101523982883974534702330268707855945172887453544796136553626856533320671252014633114364805963350066393506429545452306598684931199273881839908070401906179253711099315854226498451366492035668417238702037565571290370639665362249539727822537649776467524363327417168749063083762093643369646560163303828989137451671156506186649008803598299073489467566657875101154486187175864844586121396598643131370290268239788503725039801997889788019922998644034522973150380153367843488747861191076182572389187004819121840897467393580133731939012353882641089156060108354588638118362330724565768723514661437844576731062026528226578030420337","s":"66795298163643716185586731902551565069871956473355130797268874241068849120210489827650293129079138248929026951389341756288265127380820412269570930588799158585024287975889043269136650507810707589823861623559416280339871166851665855271627743331354916623602560400394958085829096445314053725664872139942480971769613469683405000062785184094963500271135612974808820073443449325876148489915453815419888720113560465840317156686651090635717086921744570868174285463167595010428222648936554533082073781868753736021259300728997373786075558094890273964941935949630896282668024016985553232416961077809492867060699138129768076358038","r":{"last_name":"88367652658716939634424734785117936780073640564049646801091594088783817655003337731408455773432954934034644597647583220515695947283192107510943300748034744322711262106344806853424031438628752969779666633562743441740817522089954390024932500571492840299485984381193030382534597910075472800250303622838146626870918092271935340734333923998664330357645241383470260125237965402977628538375678728723916080672239001870811550837217150340791292475119517112848095310143958361769510855603234826295284901042677567920475383053112104964373519205606987574747585016667970328362003063266711103918052238723836851954630804286370205733851","degree":"4403685614421354784032195759293642893411410224314511526063931481548869196358154763878083889705422434712865831478815065839407409155273961049804225938265004443300854973668384344904380312955276888223088908015007314759356750849836206122241689532966656937953238220539582264978517832414460833734034403770708119753692650635420363039325461837214098464222298386698940204613447220091521982946479110550595966349183161736182374054966633875833639543457684975532766431664412370201637003921008691586078871799469368660861337451016343957907597643261945153842803675702034181906667701036929423692632467325677807136233247592418279278340","master_secret":"67137324994180971692447688708145290821655764435080759119577493442732594787658884251426229776478781976384149617460703800751818045448324666877543262963197702381276370954649371499340806597715280026121372050545271868909417261464641188602595066223963188563437463671974006795077539944137784242666884961974034340523832453696839874134423748842479971269092421423230774950033336287450978311022132387730512580209491947040327933787033856137941082157105025027008773519811502608089465640267760228692428477282162280550459394691965930880987885674865223262107350791237163903008782774376737203815225800530907405651953438853580757394591","year":"57358852944331148210858945332271820710550814369016600799618801884135253782106707263384409969837999347035532568450552087560085823445982546093213970114366677649197974419618981146756630173775206057078345357419514435564002606095236968353529870474263580497253900000740324269384274952872426379404477914713802658992264986643673195760610063004757500348405588025940335859496984320567959627819680842223684955688049416051614977126778710854121548839938883318889710158936570649386513160144117282282273295167203991533726576457671936490269796622950208703355386089355724557182585322912349082362890394692538836454019493190976537461279","ssn":"67620028455256850024502672662637136171861609049509640147633995911580342407068536565288675938020906133335206369333897270927466404382991035423049184379450466410120179453374379856321972336763942617033684768452276575138382344750747693535488736127410602702852307036081699953317113198323706241392708604474245091173243377364504999959024818950030080434140946461836392896523106431982900921160402251644215436038176617940582723876748445193561502643250541576312887090159034010777642732300896222847974258253849907724924217417339400789448356211180105975146980374755483851434950657551357249681908347015336503295294098593070058741534","average":"74050085964324971165438567382451527510820166513082674117054202592717211811268025656090391219874871217727727197730875749943034525323562947307078990746580408985294067643903440375247400340069838317358522796743322884779066429436501049697108641551266765613162255445483099443222666488689157451403967465405718707814217796860511198961742522309576880916542134135362579536281220591387947823194519228943257100416099977834298045355068615552206848730315102091740183496398733033887751930581945840928129142377219203990463923924524767596090465257541803596447836424073888602461419672374372842636828464960886432252628442365107071184317","first_name":"58235603090332248067535423462554241013365549780255886172229812886022847391871754276153208169939214006654381719363726675863916766980615184151004824471690136243974991139859417487040194319804894162435911200898825868837227955312118396418164863623588914629070096881557539105528401698306529447770845870687359383981985425617015138050665422455772203228936528616457165836728897442290972380985240567943367015754784444052280119383937824098126002231659890567449221381396710749842170375462800919056520606992021502932500425455440500453425825056870449371450048862700131725455896812717881971794048387317415743332802166780738557254276","status":"41680091565440951502532545360621025216213001095651640770689793796105444470968044099465072196120283576849075205348615455904996205675632313123472424825590680147085113661900534046775652095295320125642790290905276358480503281208736313341779909977157696180211440500379030224345394097410388565405450583158661348364532683449628656561151761580288928054863298776988885730367754391696606542328481859290175253589463499007399975323826184348206262873654754950723690077773912731309422107972812128286442171932896546268183696427364958164614974094655235386905918557097335009560939919073661321737876368772197428920781921206205822037583"},"rctxt":"18801297474162970013852423043691026485253422764398725920101672658644406504673178687237263069269379010924074780683963566703542436437697971781217321152930363670739762620674175410784302923314778714453101876822948652280476296897662082301350400973554394656195531845727661584325248465155042014725671504905253229470792006165707884151043747929288982642395491160503832527587603502074322252845145025052626489073148657440727520082450551956096879571350695464855997971437227416701729056882730336984166119583938222731370730625351818521501330030498351590388565480338382458275974617390829500445783379355683983272696035430563162159293","z":"7224392666341814606908065821596834430994140605411349685541135101287953613468754687593339605316948297832808074823660804670502729865930697664965791578121347068524617941877541861327378474474960707942889310210277044863851947834409666468602116055345805366652876609910346079780951901537025120211241746553791138461114263535444539702121219526681648319768526710394740809185859279489766994792238560640437526209354774928259354167551615068150596102046904807395937770720149416523742821986162207846245826105122494674250936203611174760991073344167331341503407926190849036114325877959836651895115592511725573786273531676970332333219"}}}},


# })
# print(res.json())